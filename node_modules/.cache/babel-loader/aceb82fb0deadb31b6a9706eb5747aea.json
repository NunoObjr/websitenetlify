{"ast":null,"code":"import _regeneratorRuntime from\"/Users/fasm/TheBruxoTales/theGeekAwaken/The-Geek-Awaken/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/fasm/TheBruxoTales/theGeekAwaken/The-Geek-Awaken/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/fasm/TheBruxoTales/theGeekAwaken/The-Geek-Awaken/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import MenuBar from\"../components/menuBar\";import Banner from\"../components/banner\";import firebase from\"../firebase\";import{Link}from\"react-router-dom\";import\"./styles.css\";export default function PostCatView(){var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),postId=_React$useState2[0],setPostId=_React$useState2[1];var _React$useState3=React.useState({images:'',textos:'',titulos:''}),_React$useState4=_slicedToArray(_React$useState3,2),post=_React$useState4[0],setPost=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),vetor=_React$useState6[0],setVetor=_React$useState6[1];var _React$useState7=React.useState([]),_React$useState8=_slicedToArray(_React$useState7,2),obras=_React$useState8[0],setObras=_React$useState8[1];var _React$useState9=React.useState(),_React$useState10=_slicedToArray(_React$useState9,2),cat=_React$useState10[0],setCat=_React$useState10[1];function carregarDados(){return _carregarDados.apply(this,arguments);}function _carregarDados(){_carregarDados=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var str,i,obrasAux,cont;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:str='';for(i=0;i<window.location.search.length;i++){if(i>3){str=\"\".concat(str)+\"\".concat(window.location.search[i]);}}setCat(str);obrasAux=[];cont=0;_context.next=7;return firebase.database().ref(\"posts/categorias/\".concat(str.toLowerCase())).once('value').then(function(snapshot){Object.keys(snapshot.val()).forEach(function(postFeed){cont++;obrasAux.push({nomeDaObra:postFeed,images:snapshot.val()[postFeed].fotos,titulos:snapshot.val()[postFeed].titulos,textos:snapshot.val()[postFeed].textos,imagem:snapshot.val()[postFeed].imagem,id:snapshot.val()[postFeed].id});});});case 7:console.log(cont);setObras(obrasAux);setPost({titulos:'',images:'',textos:''});setPostId(str);setVetor([]);case 12:case\"end\":return _context.stop();}}},_callee);}));return _carregarDados.apply(this,arguments);}React.useEffect(function(){carregarDados();},[]);function handleClick(id){window.location=\"/postView?id=\".concat(id);}/*function verMais() {\n        let vetorAux = [];\n        let cont = contador\n        let aux = 0\n        let i = 0\n        for(let y = 0; y<vetorCats.length; y++){\n            vetorAux.push(vetorCats[y])\n        }\n        if(vetorStorage.length - cont < 4){\n            cont--\n            aux = vetorStorage.length - cont\n            for(let t=0; t<aux;t++){\n                vetorAux.push(vetorStorage[cont])\n                cont++\n            }\n        }\n        for(cont; cont<vetorStorage.length;cont++){\n            i++\n            if(i<4){\n                vetorAux.push(vetorStorage[cont])\n            }\n        }\n        aux != 0 ?  setContador(contador+aux) : setContador(contador+4)\n        setVetorCats(vetorAux)\n    }*/return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Banner,null),/*#__PURE__*/React.createElement(MenuBar,null),/*#__PURE__*/React.createElement(\"div\",{className:\"containerReviews\"},/*#__PURE__*/React.createElement(\"h1\",null,cat),obras.map(function(cat,key){return/*#__PURE__*/React.createElement(\"div\",{key:key},/*#__PURE__*/React.createElement(\"div\",{className:\"linha\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"img\",{key:key,onClick:function onClick(){return handleClick(cat.id);},className:\"cardImage\",alt:\"imagem do card\",src:cat.imagem}),/*#__PURE__*/React.createElement(\"div\",{style:{overflowY:\"scroll\"}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",{key:key,onClick:function onClick(){return handleClick(cat.id);}},cat.nomeDaObra),/*#__PURE__*/React.createElement(\"h4\",null,cat.textos.texto2)))));}),/*#__PURE__*/React.createElement(\"div\",{className:\"verMaisContainer\",style:{cursor:'pointer'}},/*#__PURE__*/React.createElement(\"h1\",null,\"Ver mais\"))));}","map":{"version":3,"sources":["/Users/fasm/TheBruxoTales/theGeekAwaken/The-Geek-Awaken/frontend/src/pages/postCatView.js"],"names":["React","MenuBar","Banner","firebase","Link","PostCatView","useState","postId","setPostId","images","textos","titulos","post","setPost","vetor","setVetor","obras","setObras","cat","setCat","carregarDados","str","i","window","location","search","length","obrasAux","cont","database","ref","toLowerCase","once","then","snapshot","Object","keys","val","forEach","postFeed","push","nomeDaObra","fotos","imagem","id","console","log","useEffect","handleClick","map","key","overflowY","texto2","cursor"],"mappings":"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","sourcesContent":["import React from 'react'\nimport MenuBar from \"../components/menuBar\"\nimport Banner from \"../components/banner\"\nimport firebase from \"../firebase\"\nimport { Link } from \"react-router-dom\"\nimport \"./styles.css\"\n\nexport default function PostCatView(){\n\n    const [postId, setPostId] = React.useState(null);\n    const [post, setPost] = React.useState({images:'', textos:'', titulos:''});\n    const [vetor,setVetor] = React.useState([])\n    const [obras, setObras] = React.useState([])\n    const [cat, setCat] = React.useState()\n\n    async function carregarDados(){\n        let str = '';\n        for(var i =0; i<window.location.search.length;i++){\n            if(i>3){\n                str = `${str}` + `${window.location.search[i]}`\n            }\n        }\n        setCat(str)\n        let obrasAux = []; \n        let cont = 0;\n        await firebase.database().ref(`posts/categorias/${str.toLowerCase()}`).once('value').\n        then(function(snapshot){\n            Object.keys(snapshot.val()).forEach(function(postFeed){\n                cont++\n                obrasAux.push({nomeDaObra:postFeed,images:snapshot.val()[postFeed].fotos,\n                    titulos:snapshot.val()[postFeed].titulos,textos:snapshot.val()[postFeed].textos,imagem:snapshot.val()[postFeed].imagem\n                    ,id:snapshot.val()[postFeed].id})\n            })\n\n            \n        })\n        console.log(cont)\n        setObras(obrasAux)\n        setPost({titulos:'',images:'',textos:''})\n        setPostId(str)\n        setVetor([])\n    }\n\n    React.useEffect(()=>{\n        carregarDados();\n    },[])\n\n    function handleClick(id) {\n        window.location = `/postView?id=${id}`\n    }\n\n    /*function verMais() {\n        let vetorAux = [];\n        let cont = contador\n        let aux = 0\n        let i = 0\n        for(let y = 0; y<vetorCats.length; y++){\n            vetorAux.push(vetorCats[y])\n        }\n        if(vetorStorage.length - cont < 4){\n            cont--\n            aux = vetorStorage.length - cont\n            for(let t=0; t<aux;t++){\n                vetorAux.push(vetorStorage[cont])\n                cont++\n            }\n        }\n        for(cont; cont<vetorStorage.length;cont++){\n            i++\n            if(i<4){\n                vetorAux.push(vetorStorage[cont])\n            }\n        }\n        aux != 0 ?  setContador(contador+aux) : setContador(contador+4)\n        setVetorCats(vetorAux)\n    }*/\n\n    return(\n        <div>\n            <Banner/>\n            <MenuBar/>\n            <div className='containerReviews'>\n            <h1>{cat}</h1>\n            {obras.map((cat, key) => (           \n                <div key={key}>\n                    <div className=\"linha\"></div>\n                    <div className='card' >\n                        <img key={key} onClick={() => handleClick(cat.id)} className=\"cardImage\" alt='imagem do card' src={cat.imagem} />             \n                        <div style={{overflowY:\"scroll\"}}>\n                            <div>\n                                <h2 key={key} onClick={() => handleClick(cat.id)}>{cat.nomeDaObra}</h2>\n                                <h4>{cat.textos.texto2}</h4>\n                            </div>\n                        </div>                      \n                 </div>\n                </div>\n            ))}\n            <div className='verMaisContainer' style={{ cursor: 'pointer' }} >\n                <h1>Ver mais</h1>\n            </div>\n        </div>\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}