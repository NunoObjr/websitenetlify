{"ast":null,"code":"import _regeneratorRuntime from\"/Users/fasm/TheBruxoTales/theGeekAwaken/The-Geek-Awaken/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/fasm/TheBruxoTales/theGeekAwaken/The-Geek-Awaken/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/fasm/TheBruxoTales/theGeekAwaken/The-Geek-Awaken/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import MenuBar from\"../components/menuBar\";import firebase from\"../firebase\";import{Link}from\"react-router-dom\";import\"./styles.css\";export default function PostCatView(){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),obras=_React$useState2[0],setObras=_React$useState2[1];var _React$useState3=React.useState(),_React$useState4=_slicedToArray(_React$useState3,2),cat=_React$useState4[0],setCat=_React$useState4[1];function carregarDados(){return _carregarDados.apply(this,arguments);}function _carregarDados(){_carregarDados=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var str,i,obrasAux;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:str='';for(i=0;i<window.location.search.length;i++){if(i>3){str=\"\".concat(str)+\"\".concat(window.location.search[i]);}}if(!(str!=='')){_context.next=8;break;}setCat(str);obrasAux=[];_context.next=7;return firebase.database().ref(\"posts/categorias/\".concat(str.toLowerCase())).limitToLast(10).once('value').then(function(snapshot){Object.keys(snapshot.val()).forEach(function(postFeed){obrasAux.push({nomeDaObra:postFeed,fotos:snapshot.val()[postFeed].fotos,titulos:snapshot.val()[postFeed].titulos,textos:snapshot.val()[postFeed].textos,imagem:snapshot.val()[postFeed].imagem,sinopse:snapshot.val()[postFeed].sinopse,id:snapshot.val()[postFeed].id});});});case 7:setObras(obrasAux);case 8:case\"end\":return _context.stop();}}},_callee);}));return _carregarDados.apply(this,arguments);}React.useEffect(function(){carregarDados();},[]);/*function verMais() {\n        let vetorAux = [];\n        let cont = contador\n        let aux = 0\n        let i = 0\n        for(let y = 0; y<vetorCats.length; y++){\n            vetorAux.push(vetorCats[y])\n        }\n        if(vetorStorage.length - cont < 4){\n            cont--\n            aux = vetorStorage.length - cont\n            for(let t=0; t<aux;t++){\n                vetorAux.push(vetorStorage[cont])\n                cont++\n            }\n        }\n        for(cont; cont<vetorStorage.length;cont++){\n            i++\n            if(i<4){\n                vetorAux.push(vetorStorage[cont])\n            }\n        }\n        aux != 0 ?  setContador(contador+aux) : setContador(contador+4)\n        setVetorCats(vetorAux)\n    }*/return/*#__PURE__*/React.createElement(\"div\",{className:\"page\",style:{minHeight:'700px'}},/*#__PURE__*/React.createElement(MenuBar,null),/*#__PURE__*/React.createElement(\"div\",{id:\"containerReviews\"},/*#__PURE__*/React.createElement(\"h1\",null,cat),obras.map(function(cat,key){return/*#__PURE__*/React.createElement(\"div\",{key:key},/*#__PURE__*/React.createElement(\"div\",{id:\"card\",style:{width:'100%',height:'180px'}},/*#__PURE__*/React.createElement(\"div\",{id:\"cardImageAux\"},/*#__PURE__*/React.createElement(Link,{style:{textDecoration:'none',borderRadius:'7px'},to:{pathname:'/postView',state:{post:cat}}},/*#__PURE__*/React.createElement(\"img\",{id:\"cardImage\",alt:\"imagem do card\",src:cat.imagem}))),/*#__PURE__*/React.createElement(\"div\",{id:\"cardText\"},/*#__PURE__*/React.createElement(Link,{style:{textDecoration:'none'},to:{pathname:'/postView',state:{post:cat}}},/*#__PURE__*/React.createElement(\"span\",null,cat.titulo)),/*#__PURE__*/React.createElement(\"p\",null,cat.sinopse))),/*#__PURE__*/React.createElement(\"div\",{id:\"line\",style:{width:'98%'}}));})));}","map":{"version":3,"sources":["/Users/fasm/TheBruxoTales/theGeekAwaken/The-Geek-Awaken/frontend/src/pages/postCatView.js"],"names":["React","MenuBar","firebase","Link","PostCatView","useState","obras","setObras","cat","setCat","carregarDados","str","i","window","location","search","length","obrasAux","database","ref","toLowerCase","limitToLast","once","then","snapshot","Object","keys","val","forEach","postFeed","push","nomeDaObra","fotos","titulos","textos","imagem","sinopse","id","useEffect","minHeight","map","key","width","height","textDecoration","borderRadius","pathname","state","post","titulo"],"mappings":"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","sourcesContent":["import React from 'react'\nimport MenuBar from \"../components/menuBar\"\nimport firebase from \"../firebase\"\nimport { Link } from \"react-router-dom\"\nimport \"./styles.css\"\n\nexport default function PostCatView(){\n\n    const [obras, setObras] = React.useState([])\n    const [cat, setCat] = React.useState()\n\n    async function carregarDados(){\n        let str = '';\n        for(var i =0; i<window.location.search.length;i++){\n            if(i>3){\n                str = `${str}` + `${window.location.search[i]}`\n            }\n        }\n        if(str !== ''){\n            setCat(str)\n            let obrasAux = [];\n            await firebase.database().ref(`posts/categorias/${str.toLowerCase()}`).limitToLast(10).once('value').\n            then(function(snapshot){\n                Object.keys(snapshot.val()).forEach(function(postFeed){\n                    obrasAux.push({nomeDaObra:postFeed,fotos:snapshot.val()[postFeed].fotos,\n                        titulos:snapshot.val()[postFeed].titulos,textos:snapshot.val()[postFeed].textos,\n                        imagem:snapshot.val()[postFeed].imagem,sinopse:snapshot.val()[postFeed].sinopse,id:snapshot.val()[postFeed].id})\n                })\n    \n                \n            })\n            setObras(obrasAux)\n\n        }\n    }\n\n    React.useEffect(()=>{\n        carregarDados();\n    },[])\n\n    /*function verMais() {\n        let vetorAux = [];\n        let cont = contador\n        let aux = 0\n        let i = 0\n        for(let y = 0; y<vetorCats.length; y++){\n            vetorAux.push(vetorCats[y])\n        }\n        if(vetorStorage.length - cont < 4){\n            cont--\n            aux = vetorStorage.length - cont\n            for(let t=0; t<aux;t++){\n                vetorAux.push(vetorStorage[cont])\n                cont++\n            }\n        }\n        for(cont; cont<vetorStorage.length;cont++){\n            i++\n            if(i<4){\n                vetorAux.push(vetorStorage[cont])\n            }\n        }\n        aux != 0 ?  setContador(contador+aux) : setContador(contador+4)\n        setVetorCats(vetorAux)\n    }*/\n\n    return(\n        <div className='page' style={{minHeight:'700px'}} >\n            \n            <MenuBar/>\n            <div id='containerReviews'>\n            <h1>{cat}</h1>\n            {obras.map((cat, key) => (           \n                <div key={key}>\n                    \n                    <div id='card' style={{width:'100%',height:'180px'}} >\n                        <div id=\"cardImageAux\">\n                            <Link style={{ textDecoration: 'none', borderRadius:'7px'}} to={{pathname:'/postView', state:{post:cat}}} >\n                                    <img id=\"cardImage\" alt='imagem do card' src={cat.imagem} />             \n                            </Link>  \n                        </div>         \n                        <div id='cardText'>\n                            <Link style={{ textDecoration: 'none' }} to={{pathname:'/postView', state:{post:cat}}}>\n                                 <span>{cat.titulo}</span> \n                             </Link> \n                                <p>{cat.sinopse}</p>\n                        </div>      \n                    </div>\n                    <div id=\"line\" style={{width:'98%'}} ></div>\n                </div>\n            ))}\n            \n        </div>\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}