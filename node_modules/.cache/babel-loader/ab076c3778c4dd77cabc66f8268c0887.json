{"ast":null,"code":"import _regeneratorRuntime from\"/Users/fasm/TheBruxoTales/theGeekAwaken/The-Geek-Awaken/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/fasm/TheBruxoTales/theGeekAwaken/The-Geek-Awaken/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/Users/fasm/TheBruxoTales/theGeekAwaken/The-Geek-Awaken/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/fasm/TheBruxoTales/theGeekAwaken/The-Geek-Awaken/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import firebase from\"../firebase\";import{Link}from'react-router-dom';import'./styles.css';export default function ReviewsRecentes(props){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),vetorStorage=_React$useState2[0],setVetorStorage=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),vetorCats=_React$useState4[0],setVetorCats=_React$useState4[1];var _React$useState5=React.useState(0),_React$useState6=_slicedToArray(_React$useState5,2),contador=_React$useState6[0],setContador=_React$useState6[1];function carregarDados(){return _carregarDados.apply(this,arguments);}function _carregarDados(){_carregarDados=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var vetorPostsFeedID,vetorAux,cont;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"carregar dadod\");vetorPostsFeedID=[];_context.next=4;return firebase.database().ref(\"posts/feed\").limitToLast(10).once('value').then(function(snapshot){Object.keys(snapshot.val()).forEach(function(postFeed){vetorPostsFeedID.push(snapshot.val()[postFeed]);});});case 4:vetorAux=[];cont=contador;vetorPostsFeedID.reverse();for(cont;cont<vetorPostsFeedID.length;cont++){if(cont<4){vetorAux.push(vetorPostsFeedID[cont]);}props.posts.push(vetorPostsFeedID[cont]);}setContador(4);setVetorCats(vetorAux);setVetorStorage(vetorPostsFeedID);case 11:case\"end\":return _context.stop();}}},_callee);}));return _carregarDados.apply(this,arguments);}React.useEffect(function(){carregarDados();},[]);function verMais(){var vetorAux=[];var cont=contador;var aux=0;var i=0;vetorAux=_toConsumableArray(vetorCats);if(vetorStorage.length-cont<4){aux=vetorStorage.length-cont;for(var t=0;t<aux;t++){vetorAux.push(vetorStorage[cont]);cont++;}}else{for(cont;cont<vetorStorage.length;cont++){if(i<4){vetorAux.push(vetorStorage[cont]);}i++;}}setVetorCats(vetorAux);aux!==0?setContador(contador+aux):setContador(contador+4);}return/*#__PURE__*/React.createElement(\"div\",{id:\"containerReviews\"},/*#__PURE__*/React.createElement(\"div\",{style:{marginBottom:'3%'}},/*#__PURE__*/React.createElement(\"h1\",null,\"Postagens\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return props.openModal();},style:{display:localStorage.getItem('logado')==='logado'?\"block\":\"none\"}},\"Novo\")),vetorCats.map(function(cat,key){return/*#__PURE__*/React.createElement(\"div\",{key:key},/*#__PURE__*/React.createElement(\"div\",{id:\"card\"},/*#__PURE__*/React.createElement(\"div\",{id:\"cardImageAux\"},/*#__PURE__*/React.createElement(Link,{style:{textDecoration:'none',borderRadius:'7px'},to:{pathname:\"/postView/\".concat(cat.id),state:{post:cat}}},/*#__PURE__*/React.createElement(\"img\",{id:\"cardImage\",alt:\"imagem do card\",src:cat.imagem}))),/*#__PURE__*/React.createElement(\"div\",{id:\"cardText\"},/*#__PURE__*/React.createElement(Link,{style:{textDecoration:'none'},to:{pathname:\"/postView/\".concat(cat.id),state:{post:cat}}},/*#__PURE__*/React.createElement(\"h2\",null,cat.titulo)),/*#__PURE__*/React.createElement(\"p\",null,cat.sinopse))),/*#__PURE__*/React.createElement(\"div\",{id:\"line\"}));}),/*#__PURE__*/React.createElement(\"div\",{className:\"verMais\",onClick:function onClick(){return verMais();}},/*#__PURE__*/React.createElement(\"h3\",null,\"Ver mais\")));}","map":{"version":3,"sources":["/Users/fasm/TheBruxoTales/theGeekAwaken/The-Geek-Awaken/frontend/src/components/reviewsR.js"],"names":["React","firebase","Link","ReviewsRecentes","props","useState","vetorStorage","setVetorStorage","vetorCats","setVetorCats","contador","setContador","carregarDados","console","log","vetorPostsFeedID","database","ref","limitToLast","once","then","snapshot","Object","keys","val","forEach","postFeed","push","vetorAux","cont","reverse","length","posts","useEffect","verMais","aux","i","t","marginBottom","openModal","display","localStorage","getItem","map","cat","key","textDecoration","borderRadius","pathname","id","state","post","imagem","titulo","sinopse"],"mappings":"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","sourcesContent":["import React from 'react'\nimport firebase from \"../firebase\"\nimport { Link } from 'react-router-dom'\nimport './styles.css'\n\nexport default function ReviewsRecentes(props) {\n    const [vetorStorage,setVetorStorage] = React.useState([])\n    const [vetorCats, setVetorCats] = React.useState([])\n    const [contador, setContador] = React.useState(0)\n    \n    async function carregarDados(){\n        console.log(\"carregar dadod\")\n        let vetorPostsFeedID = []\n        await firebase.database().ref(`posts/feed`).limitToLast(10).once('value').then(function(snapshot){\n            Object.keys(snapshot.val()).forEach(function(postFeed){\n                vetorPostsFeedID.push(snapshot.val()[postFeed])\n            })\n        })\n        let vetorAux = [];\n        let cont = contador\n        vetorPostsFeedID.reverse();\n        for(cont; cont<vetorPostsFeedID.length;cont++){\n            if(cont<4){\n                vetorAux.push(vetorPostsFeedID[cont])\n            }\n            props.posts.push(vetorPostsFeedID[cont])\n        }\n        setContador(4)\n        setVetorCats(vetorAux);\n        setVetorStorage(vetorPostsFeedID)\n    }\n\n    React.useEffect(()=>{\n        carregarDados();\n    },[])\n    function verMais() {\n        let vetorAux = [];\n        let cont = contador\n        let aux = 0\n        let i = 0\n        vetorAux=[...vetorCats]\n        if(vetorStorage.length - cont < 4){\n            aux = vetorStorage.length - cont\n            for(let t=0; t<aux;t++){\n                vetorAux.push(vetorStorage[cont])\n                cont++\n            }\n        }\n        else{\n            for(cont; cont<vetorStorage.length;cont++){\n                if(i<4){\n                    vetorAux.push(vetorStorage[cont])\n                }\n                i++\n            }\n        }\n        setVetorCats(vetorAux)\n        aux !== 0 ?  setContador(contador+aux) : setContador(contador+4)\n    }\n    return (\n        <div id='containerReviews'>\n            <div style={{marginBottom:'3%'}}>\n                <h1>Postagens</h1>\n            <button onClick={()=>props.openModal()} style={{display: localStorage.getItem('logado') === 'logado' ? \"block\":\"none\"}}>Novo</button></div>\n            {vetorCats.map((cat, key) => (\n           \n                <div key={key}>\n                    <div id='card'>\n                        <div id=\"cardImageAux\">\n                            <Link style={{ textDecoration: 'none', borderRadius:'7px'}} to={{pathname:`/postView/${cat.id}`, state:{post:cat}}} >\n                                    <img id=\"cardImage\" alt='imagem do card' src={cat.imagem} />             \n                            </Link>  \n                        </div>         \n                        <div id='cardText'>\n                            <Link style={{ textDecoration: 'none' }} to={{pathname:`/postView/${cat.id}`, state:{post:cat}}}>\n                                 <h2>{cat.titulo}</h2> \n                             </Link> \n                                <p>{cat.sinopse}</p>\n                        </div>      \n                    </div>\n                    <div id=\"line\"></div>\n                </div>\n            ))}\n            <div className='verMais' onClick={()=>verMais()} >\n                <h3>Ver mais</h3>\n            </div>\n            \n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}