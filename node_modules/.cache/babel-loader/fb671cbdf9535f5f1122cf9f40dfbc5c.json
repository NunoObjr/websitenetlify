{"ast":null,"code":"import _regeneratorRuntime from\"/Users/fasm/TheBruxoTales/theGeekAwaken/The-Geek-Awaken/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/fasm/TheBruxoTales/theGeekAwaken/The-Geek-Awaken/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/fasm/TheBruxoTales/theGeekAwaken/The-Geek-Awaken/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import MenuBar from\"../components/menuBar\";import Banner from\"../components/banner\";import firebase from\"../firebase\";import{Link}from\"react-router-dom\";import\"./styles.css\";export default function PostCatView(){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),obras=_React$useState2[0],setObras=_React$useState2[1];var _React$useState3=React.useState(),_React$useState4=_slicedToArray(_React$useState3,2),cat=_React$useState4[0],setCat=_React$useState4[1];function carregarDados(){return _carregarDados.apply(this,arguments);}function _carregarDados(){_carregarDados=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var str,i,obrasAux,cont;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:str='';for(i=0;i<window.location.search.length;i++){if(i>3){str=\"\".concat(str)+\"\".concat(window.location.search[i]);}}setCat(str);obrasAux=[];cont=0;_context.next=7;return firebase.database().ref(\"posts/categorias/\".concat(str.toLowerCase())).once('value').then(function(snapshot){Object.keys(snapshot.val()).forEach(function(postFeed){cont++;obrasAux.push({nomeDaObra:postFeed,fotos:snapshot.val()[postFeed].fotos,titulos:snapshot.val()[postFeed].titulos,textos:snapshot.val()[postFeed].textos,imagem:snapshot.val()[postFeed].imagem,sinopse:snapshot.val()[postFeed].sinopse,id:snapshot.val()[postFeed].id});});});case 7:setObras(obrasAux);case 8:case\"end\":return _context.stop();}}},_callee);}));return _carregarDados.apply(this,arguments);}React.useEffect(function(){carregarDados();},[]);/*function verMais() {\n        let vetorAux = [];\n        let cont = contador\n        let aux = 0\n        let i = 0\n        for(let y = 0; y<vetorCats.length; y++){\n            vetorAux.push(vetorCats[y])\n        }\n        if(vetorStorage.length - cont < 4){\n            cont--\n            aux = vetorStorage.length - cont\n            for(let t=0; t<aux;t++){\n                vetorAux.push(vetorStorage[cont])\n                cont++\n            }\n        }\n        for(cont; cont<vetorStorage.length;cont++){\n            i++\n            if(i<4){\n                vetorAux.push(vetorStorage[cont])\n            }\n        }\n        aux != 0 ?  setContador(contador+aux) : setContador(contador+4)\n        setVetorCats(vetorAux)\n    }*/return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Banner,null),/*#__PURE__*/React.createElement(MenuBar,null),/*#__PURE__*/React.createElement(\"div\",{className:\"containerReviews\"},/*#__PURE__*/React.createElement(\"h1\",null,cat),obras.map(function(cat,key){return/*#__PURE__*/React.createElement(\"div\",{key:key},/*#__PURE__*/React.createElement(\"div\",{className:\"linha\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(Link,{style:{textDecoration:'none'},to:{pathname:'/postView',state:{post:cat}}},/*#__PURE__*/React.createElement(\"img\",{className:\"cardImage\",alt:\"imagem do card\",src:cat.imagem}),\"  \"),/*#__PURE__*/React.createElement(\"div\",{style:{overflowY:\"scroll\"}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Link,{style:{textDecoration:'none'},to:{pathname:'/postView',state:{post:cat}}},/*#__PURE__*/React.createElement(\"h2\",null,cat.nomeDaObra)),/*#__PURE__*/React.createElement(\"h4\",null,cat.sinopse)))));}),/*#__PURE__*/React.createElement(\"div\",{className:\"verMaisContainer\",style:{cursor:'pointer'}},/*#__PURE__*/React.createElement(\"h1\",null,\"Ver mais\"))));}","map":{"version":3,"sources":["/Users/fasm/TheBruxoTales/theGeekAwaken/The-Geek-Awaken/frontend/src/pages/postCatView.js"],"names":["React","MenuBar","Banner","firebase","Link","PostCatView","useState","obras","setObras","cat","setCat","carregarDados","str","i","window","location","search","length","obrasAux","cont","database","ref","toLowerCase","once","then","snapshot","Object","keys","val","forEach","postFeed","push","nomeDaObra","fotos","titulos","textos","imagem","sinopse","id","useEffect","map","key","textDecoration","pathname","state","post","overflowY","cursor"],"mappings":"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","sourcesContent":["import React from 'react'\nimport MenuBar from \"../components/menuBar\"\nimport Banner from \"../components/banner\"\nimport firebase from \"../firebase\"\nimport { Link } from \"react-router-dom\"\nimport \"./styles.css\"\n\nexport default function PostCatView(){\n\n    const [obras, setObras] = React.useState([])\n    const [cat, setCat] = React.useState()\n\n    async function carregarDados(){\n        let str = '';\n        for(var i =0; i<window.location.search.length;i++){\n            if(i>3){\n                str = `${str}` + `${window.location.search[i]}`\n            }\n        }\n        setCat(str)\n        let obrasAux = []; \n        let cont = 0;\n        await firebase.database().ref(`posts/categorias/${str.toLowerCase()}`).once('value').\n        then(function(snapshot){\n            Object.keys(snapshot.val()).forEach(function(postFeed){\n                cont++\n                obrasAux.push({nomeDaObra:postFeed,fotos:snapshot.val()[postFeed].fotos,\n                    titulos:snapshot.val()[postFeed].titulos,textos:snapshot.val()[postFeed].textos,\n                    imagem:snapshot.val()[postFeed].imagem,sinopse:snapshot.val()[postFeed].sinopse,id:snapshot.val()[postFeed].id})\n            })\n\n            \n        })\n        setObras(obrasAux)\n    }\n\n    React.useEffect(()=>{\n        carregarDados();\n    },[])\n\n    /*function verMais() {\n        let vetorAux = [];\n        let cont = contador\n        let aux = 0\n        let i = 0\n        for(let y = 0; y<vetorCats.length; y++){\n            vetorAux.push(vetorCats[y])\n        }\n        if(vetorStorage.length - cont < 4){\n            cont--\n            aux = vetorStorage.length - cont\n            for(let t=0; t<aux;t++){\n                vetorAux.push(vetorStorage[cont])\n                cont++\n            }\n        }\n        for(cont; cont<vetorStorage.length;cont++){\n            i++\n            if(i<4){\n                vetorAux.push(vetorStorage[cont])\n            }\n        }\n        aux != 0 ?  setContador(contador+aux) : setContador(contador+4)\n        setVetorCats(vetorAux)\n    }*/\n\n    return(\n        <div>\n            <Banner/>\n            <MenuBar/>\n            <div className='containerReviews'>\n            <h1>{cat}</h1>\n            {obras.map((cat, key) => (           \n                <div key={key}>\n                    <div className=\"linha\"></div>\n                    <div className='card' >\n                        <Link style={{ textDecoration: 'none' }} to={{pathname:'/postView', state:{post:cat}}} ><img className=\"cardImage\" alt='imagem do card' src={cat.imagem} />  </Link>             \n                        <div style={{overflowY:\"scroll\"}}>\n                            <div>\n                                <Link style={{ textDecoration: 'none' }} to={{pathname:'/postView', state:{post:cat}}}><h2>{cat.nomeDaObra}</h2></Link>\n                                <h4>{cat.sinopse}</h4>\n                            </div>\n                        </div>                      \n                 </div>\n                </div>\n            ))}\n            <div className='verMaisContainer' style={{ cursor: 'pointer' }} >\n                <h1>Ver mais</h1>\n            </div>\n        </div>\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}